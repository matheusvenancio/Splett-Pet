<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">
	<h:head>
		<f:metadata>
			<f:event type="preRenderView"
				listener="#{pesquisaOrgMB.pesquisarOrganizacoes}" />
		</f:metadata>

	</h:head>

	<ui:define name="body">
		<f:view contentType="text/html">
			<h:form id="pesquisaOrgForm">
				<h:panelGrid styleClass="alignCenter">
					<h:outputText value="Para doar e preciso escolher uma organizacao!"
						styleClass="fonteM" style="font-size:13px !important" />
				</h:panelGrid>
				<h:panelGrid styleClass="alignCenter">
					<h:outputText value="Procure uma por: " styleClass="fonteLaranja"
						style="font-size:13px !important" />
				</h:panelGrid>

				<p:panelGrid columns="2" styleClass="semBorda"
					style="margin-left: auto !important; margin-right: auto !important;">

					<p:column>
						<h:outputText value="Nome: " styleClass="f5" />
						<p:inputText value="#{pesquisaOrgMB.nome}" style="width:95%" />
					</p:column>
					<p:column>
						<h:outputText value="Moderador: " styleClass="f5" />
						<p:inputText value="#{pesquisaOrgMB.nomeMod}" style="width:95%" />
					</p:column>
					<p:column>
					<p:selectOneMenu id="selectEstado" styleClass="f6"
						value="#{pesquisaOrgMB.estado}" effect="fade"
						converter="#{estadoConverter}" style="font-size:15px">
						<f:selectItem itemLabel="Selecione" itemValue=""/>
						<f:selectItems value="#{enderecoMB.estados}" var="est"
							itemLabel="#{est.nome}" itemValue="#{est}" />
					</p:selectOneMenu>
					</p:column>
					<p:column>
						<p:commandButton
							actionListener="#{pesquisaOrgMB.pesquisarOrganizacoes}"
							value="Pesquisar" update=":tabelaOrganizacoesForm:organizacoes"
							style="font-size:13px !important" />
					</p:column>
				</p:panelGrid>
			</h:form>

			<h:form id="tabelaOrganizacoesForm">
				<p:dataTable id="organizacoes" value="#{pesquisaOrgMB.resultados}"
					var="org" paginator="true" rows="3"
					paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink}"
					paginatorPosition="bottom"
					styleClass="hide-column-names, panelGridCellspacing"
					style="padding:0 !important; margin-top: 10px !important;width:700px; height:300px;margin-left: auto !important; margin-right: auto !important;">
					<f:facet name="header">
						<h:outputText value="Organizacoes do Sistema" />
					</f:facet>
					<p:column>
						<p:panel header="#{org.nome}">
							<h:panelGrid columns="2">
								<p:column>
									<h:panelGrid>
										<h:outputText value="#{org.nome}" styleClass="f5" />

									</h:panelGrid>
									<p:separator />
									<h:panelGroup>
										<h:outputText value="Proposta: " styleClass="f5" />
										<h:outputText value="#{org.proposta}" styleClass="f6" />
									</h:panelGroup>
									<p:separator />
									<h:panelGroup>
										<h:outputText value="Descricao: " styleClass="f5" />
										<h:outputText value="#{org.descricao}" styleClass="f6" />
									</h:panelGroup>
								</p:column>

								<p:column>
									<h:panelGrid columns="1">
										<h:panelGroup>

											<h:outputText value="fundada em: " styleClass="f5"
												style="padding-left:120px; padding-top:10px" />
											<h:outputText value="#{org.dataCadastro}" styleClass="f6">
												<f:convertDateTime pattern="dd/MM/yyyy" />
											</h:outputText>

										</h:panelGroup>
										<h:panelGrid columns="2">
											<p:button id="btDoarOrg" value="Doe aqui!"
												outcome="novaDoacaoOrg"
												style="font-size:12px !important;margin-left:120px">
												<f:param name="id" value="#{org.id}" />
											</p:button>
											<p:button id="btPagOrg" value="Ver Pagina!"
											outcome="visualizarOrg"
											style="font-size:12px !important;margin-left:120px">
											<f:param name="id" value="#{org.id}" />
										</p:button>
										
									</h:panelGrid>
										<p:graphicImage style="margin-left:120px"
											value="/image?nome=#{org.imgMain.nome}" width="300"
											height="250" />
									</h:panelGrid>
								</p:column>
							</h:panelGrid>
							<p:separator/>
						</p:panel>
					</p:column>
				</p:dataTable>
			</h:form>
		</f:view>
	</ui:define>
</ui:composition>
