<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">
	<h:head>
		<f:metadata>
			<f:event type="preRenderView"
				listener="#{pesquisaOrgMB.pesquisarOrganizacoes}" />
		</f:metadata>

	</h:head>

	<ui:define name="body">
		<f:view contentType="text/html">
			<h:form id="pesquisaOrgForm">
				<p:panelGrid columns="2" styleClass="semBorda"
					style="margin-left: auto !important; margin-right: auto !important;">

					<p:column>
						<h:outputText value="Nome: " styleClass="f5" />
						<p:inputText value="#{pesquisaOrgMB.nome}" style="width:95%" />
					</p:column>
					<p:column>
						<h:outputText value="Moderador: " styleClass="f5" />
						<p:inputText value="#{pesquisaOrgMB.nomeMod}" style="width:95%" />
					</p:column>
					<p:column>
						<p:selectOneMenu id="selectEstado" styleClass="f6"
							value="#{pesquisaOrgMB.estado}" effect="fade"
							converter="#{estadoConverter}" style="font-size:15px">
							<f:selectItem itemLabel="Selecione" itemValue="" />
							<f:selectItems value="#{enderecoMB.estados}" var="est"
								itemLabel="#{est.nome}" itemValue="#{est}" />
						</p:selectOneMenu>
					</p:column>
					<p:column>
						<p:commandButton
							actionListener="#{pesquisaOrgMB.pesquisarOrganizacoes}"
							value="Pesquisar" update=":tabelaOrganizacoesForm:organizacoes"
							style="font-size:13px !important" />
					</p:column>
				</p:panelGrid>
			</h:form>

			<h:form id="tabelaOrganizacoesForm" styleClass="alignCenter">
				<p:dataTable id="organizacoes" value="#{pesquisaOrgMB.resultados}"
					var="org" paginator="true" rows="5"
					paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink}"
					paginatorPosition="bottom"
					emptyMessage="Nenhuma organizacao encontrada"
					styleClass="hide-column-names, panelGridCellspacing"
					style="margin-top: 10px !important;width:700px; height:300px; font-size:13px !important; margin-left:120px">

					<p:column>
						<p:tabView orientation="left"
							style="width:800px;height:400px !important">

							<p:tab title="Sobre a organizacao">
								<p:panelGrid columns="1" style="height:300px;width:100px"
									styleClass="alignCenter">
									<h:panelGroup>
										<h:outputText value="#{org.nome}" styleClass="f5"
											style="margin-left:300px" />
									</h:panelGroup>
									<p:graphicImage style="margin-left:0px; border-radius:10px"
										value="/image?nome=#{org.imgMain.nome}" width="400"
										height="250" />

								</p:panelGrid>
							</p:tab>

							<p:tab title="Eventos">
								<p:dataTable paginator="false" rows="1"
									value="#{organizacaoMB.listarUltimosEvtsOrg(org.id)}" var="evt">

									<p:column>
										<p:graphicImage value="/image?nome=#{evt.imgMain.nome}"
											width="320" height="200" />
									</p:column>

									<p:column>
										<h:panelGrid>
											<h:outputText value="-> Ultimo evento Anunciado:"
												styleClass="fonteInfoDestaq" />
										</h:panelGrid>
										<h:outputText value="#{evt.titulo}" styleClass="f5"
											style="font-size:13px !important" />
										<h:panelGrid>
											<h:outputText value="Inicio: " styleClass="f5" />
											<h:outputText value="#{evt.dataInicioEvento}" styleClass="f6">
												<f:convertDateTime pattern="dd/MM/yyyy" />
											</h:outputText>
										</h:panelGrid>
										<h:panelGrid>
											<h:outputText value="Termino: " styleClass="f5" />
											<h:outputText value="#{evt.dataInicioEvento}" styleClass="f6">
												<f:convertDateTime pattern="dd/MM/yyyy" />
											</h:outputText>
										</h:panelGrid>
										<h:panelGrid>
											<h:outputText styleClass="f6"
												value="Local do Evento: #{evt.endereco.estado.nome}, #{evt.endereco.cidade.nome}. bairro #{evt.endereco.bairro}, rua #{evt.endereco.logradouro}" />
										</h:panelGrid>

										<h:panelGrid>
											<h:outputText value="Voce podera: " styleClass="fonteLaranja"
												style="font-size:13px" />
											<p:button id="pagEvento" outcome="evento"
												value="Visualizar Pagina" style="font-size:10px !important"
												styleClass="f6">
												<f:param name="id" value="#{evt.idPublicacao}" />
											</p:button>
											<h:outputText value="ou: " styleClass="fonteLaranja"
												style="font-size:13px" />
											<p:button id="pagTodosEvts" outcome="eventosOrg"
												value="Ver Todos os Eventos"
												style="font-size:13px !important;">
												<f:param name="id" value="#{org.id}" />
											</p:button>
										</h:panelGrid>
									</p:column>



								</p:dataTable>
							</p:tab>
							<p:tab title="Contato">

								<h:panelGrid styleClass="semBorda" columns="1">
									<h:outputText value="Telefone para Contato: " styleClass="f1"
										style="font-size:13px" />
									<p:panel>
										<h:outputText value="#{org.telefone}" styleClass="f6" />
									</p:panel>
									<p:separator />
									<h:outputText value="Enderecos: " styleClass="f1"
										style="font-size:13px" />
									<p:scrollPanel id="scroolEndOrg" mode="native"
										style="height:40px">
										<p:dataGrid id="enderecosTb" value="#{org.enderecos}"
											var="end" columns="1">

											<p:column>

												<h:panelGrid columns="1">

													<h:panelGroup>
														<h:outputText value="#{end.estado.nome} - "
															styleClass="f5" />

														<h:outputText value="#{end.cidade.nome}" styleClass="f6" />

														<h:outputText value=" bairro " styleClass="f5" />
														<h:outputText value="#{end.bairro}" styleClass="f6" />

														<h:outputText value=" rua " styleClass="f5" />
														<h:outputText value="#{end.logradouro}" styleClass="f6" />
													</h:panelGroup>
												</h:panelGrid>

											</p:column>

										</p:dataGrid>
									</p:scrollPanel>
								</h:panelGrid>
							</p:tab>
							<p:tab title="Mais Informa›es">
								<h:panelGrid styleClass="semBorda">

									<p:column>
										<h:panelGroup>
											<p:fieldset legend="Sobre" styleClass="f6"
												style="height:70px; margin-right:430px; width:600px">
												<h:outputText value="#{org.descricao}" style="height:70px;"
													styleClass="f6" />
												<h:panelGrid>
													<h:panelGroup>
														<h:outputText value="Fundada em: " styleClass="f5" />
														<h:outputText value="#{org.dataCadastro}" styleClass="f6">
															<f:convertDateTime pattern="dd/MM/yyy" />

														</h:outputText>
													</h:panelGroup>
												</h:panelGrid>
											</p:fieldset>
											<p:fieldset legend="Proposta" styleClass="f6"
												style="height:70px; width:650px">
												<h:outputText value="#{org.proposta}" styleClass="f6" />
											</p:fieldset>
										</h:panelGroup>
									</p:column>

								</h:panelGrid>

							</p:tab>
							<p:tab title="Necessidades">
								<p:scrollPanel mode="native">
									<p:dataGrid id="necessidadesTb"
										value="#{organizacaoMB.listarNecessidadesOrg(org.id)}"
										var="nec" columns="1" rows="2" paginator="true">
										<h:panelGrid columns="1">
											<p:column>
												<p:column colspan="5">
													<p:fieldset legend="Necessidade" styleClass="f6"
														style="height:70px; width:94%">


														<h:outputText value=" #{nec.descricao}" styleClass="f6">

														</h:outputText>
														<p:separator />
														<h:panelGrid>
															<p:button id="btDoarNecessidade" value="Ajude aqui!"
																outcome="novaDoacao"
																style="font-size:12px !important;color:orange !important">
																<f:param name="id" value="#{nec.idPublicacao}" />
															</p:button>
														</h:panelGrid>
													</p:fieldset>
												</p:column>
											</p:column>

										</h:panelGrid>
									</p:dataGrid>
								</p:scrollPanel>
							</p:tab>


														<p:tab title="Sobre o Moderador">
								<h:panelGrid styleClass="semBorda">
									<h:panelGrid>
										<h:outputText value="Sobre o moderador. "
											styleClass="fonteLaranja" style="font-size:13px" />
									</h:panelGrid>
									<h:panelGroup>
										<h:outputText value="Nome: " styleClass="f5" />
										<h:outputText value="#{org.moderador.nome}" styleClass="f6" />
									</h:panelGroup>
									<h:panelGroup>
										<h:outputText value="Descricao: " styleClass="f5" />
										<h:outputText value="#{org.moderador.bio}" styleClass="f6" />
									</h:panelGroup>
									<h:panelGroup>
										<h:outputText value="Presente desde: " styleClass="f5" />
										<h:outputText value="#{org.dataCadastro}" styleClass="f6">
											<f:convertDateTime pattern="dd/MM/yyyy 'as' HH:mm" />
										</h:outputText>
									</h:panelGroup>
									<h:panelGroup>
										<p:button value="Vizualizar Perfil" outcome="usuario"
											style="font-size: 10px !important;">
											<f:param name="view" value="#{org.moderador.username}" />
										</p:button>
									</h:panelGroup>
								</h:panelGrid>
							</p:tab>
						</p:tabView>
					</p:column>
				</p:dataTable>
			</h:form>
		</f:view>
	</ui:define>
</ui:composition>