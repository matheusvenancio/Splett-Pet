<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jstl/core"
	template="/layout/template.xhtml">

	<ui:define name="body">

	<h:form>
				<p:commandButton id="novaPost"
					value="Nova"
					actionListener="#{postagemMB.criar}"
					oncomplete="PF('novaPostagemDialog').show()"
					update=":novaPostagemDlg"
				/>
	</h:form>
	<h:form> 
		<p:dataScroller value="#{postagemMB.postagens}" var="postagem" chunkSize="10">
		   <f:facet name="header">
            	Postagens
        	</f:facet>
			<h:panelGrid columns="1" style="width:35%" >
	            <p:graphicImage library="img" name="android_icon.png"
						styleClass="fotoPerfil"  />
				 <h:outputText value="#{postagem.usuario.nome}" style="font-weight: bold"/> 
	       
	                    <h:outputText value="Data:" />
	                    <h:outputText value="#{postagem.dataPostagem}"/>
	 					
	                    <h:outputText value="Texto: " />
	                    <h:outputText value="#{postagem.texto}"/>
	                    <p:commandButton id="visualizarPostagem" value="Visualizar"/>
	                </h:panelGrid>
			</p:dataScroller>
		</h:form> 
		
		
	
			<p:dialog id="novaPostagemDlg" widgetVar="novaPostagemDialog"
			header="Nova Postagem" width="40%" modal="true"
			resizable="false" closable="false" showEffect="clip"
			hideEffect="clip">
			<h:form id="novaPostagem_form">

				<h:panelGrid columns="1">
					<p:inputTextarea rows="5" cols="60" counter="display" maxlength="255" counterTemplate="{0} characters remaining." autoResize="false" binding="#{textoPostagem}" />
  					<h:outputText id="display" />

				</h:panelGrid>

				<p:commandButton id="enviarBt" value="Salvar" icon="salvar16"
					update=":novaPostagem_form"
					actionListener="#{postagemMB.salvarPostagem(textoPostagem.value)}"
					oncomplete="if(!args.validationFailed) PF('novaPostagemDialog').hide()" />

				<p:commandButton id="cancelarBtE" value="Cancelar" icon="cancelar16"
					oncomplete="PF('novaPostagemDialog').hide()" update=":novaPostagem_form"
					immediate="true" actionListener="#{postagemMB.cancelar}" />

			</h:form>
		</p:dialog>

	</ui:define>
</ui:composition>
